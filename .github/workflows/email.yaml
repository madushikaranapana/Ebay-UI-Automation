name: Report Notification Email
run-name: Report Notification Email

on:
  workflow_run:
    workflows: ["Ebay UI AUTOMATION"]
    types:
      - completed

jobs:
  send_email:
    name: Send Email Notification
    runs-on: ubuntu-latest

    steps:
      - name: Send Allure Report Email
        uses: dawidd6/action-send-mail@v4
        with:
          server_address: smtp.gmail.com
          server_port: 465
          secure: true
          username: ${{ secrets.MAILUSERNAME }}
          password: ${{ secrets.MAILPASSWORD }}
          subject: "Weekly Test Report - eBay UI Automation"
          to: madushikaranapana113@gmail.com
          cc: madushikaranapana113@gmail.com
          from: ${{ secrets.MAILUSERNAME }}
          body: |
            Dear Team,

            The latest Allure report has been generated and is available at the link below:

            ðŸ‘‰ https://madushikaranapana.github.io/Ebay-UI-Automation/

            Please review the test results and let us know if there are any concerns.

            Regards,
            QA Automation Team
